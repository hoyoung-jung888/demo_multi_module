/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/6.7.1/samples
 */
plugins {
  id "org.springframework.boot" version "2.4.1" apply false
  id 'io.spring.dependency-management' version '1.0.10.RELEASE' apply false
  id 'java'
}

subprojects {
  apply plugin: 'java'
  apply plugin: 'org.springframework.boot'
  apply plugin: 'io.spring.dependency-management'

  group 'org.example'
  version '0.0.1'
  sourceCompatibility = JavaVersion.VERSION_1_8

  configurations {
    compileOnly {
      extendsFrom annotationProcessor
    }
  }

  repositories {
    mavenCentral()
  }

  dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-web'
    compileOnly 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'

    //Apache Commons
    compile group: 'commons-io', name: 'commons-io', version: '2.8.0'
    compile group: 'org.apache.commons', name: 'commons-lang3', version: '3.11'
    compile group: 'commons-fileupload', name: 'commons-fileupload', version: '1.4'

  }

  test {
    useJUnitPlatform()
  }
}

project(':demo_module') {
  apply plugin: 'java-library'

  bootJar {
    enabled false
  }

  jar {
    enabled true
  }
  dependencies {
    // https://mvnrepository.com/artifact/org.springframework/spring-aspects
    compile group: 'org.springframework', name: 'spring-aspects', version: '5.3.2'
  }
}

project(':demo_api') {
  dependencies {
    compile project(':demo_module')

    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    runtimeOnly 'com.h2database:h2'

    testImplementation 'org.springframework.boot:spring-boot-starter-test'
  }
}